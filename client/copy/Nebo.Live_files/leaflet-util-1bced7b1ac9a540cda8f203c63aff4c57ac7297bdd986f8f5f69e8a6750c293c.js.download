function getOpts(a){var t="gray",e="marker-inactive",n=1;return a.toString().includes("%")||a.toString().includes("\u2713")||a.toString().includes("?")?(t="#fff0f5",e="map-label-claim"):((a=parseInt(a))>=0&&(t="#5B8CFE",e="marker-zone1",n=2),a>=50&&(t="#ffc400",e="marker-zone2",n=3),a>=100&&(t="#ff9c00",e="marker-zone3",n=4),a>=150&&(t="#ff4b39",e="marker-zone4",n=5),a>=200&&(t="#2d2d2d",e="marker-zone5",n=6),a>=300&&(t="#262626",e="marker-zone6",n=7)),{color:t,klass:e,zone:n}}function setMarkers(a,t,e=!1){cluster.remove();for(var n=L.markerClusterGroup({iconCreateFunction:function(a){var t=0,e=0;a.getAllChildMarkers().forEach(function(a){a.options.value>=0&&(e+=1,t+=a.options.value)});var n=Math.round(t/e);return L.divIcon({html:'<div class="my-div-icon-cluster '+getOpts(n).klass+'"><span class="my-div-span">'+n+"</span></div>",className:"my-div-icon",iconSize:new L.Point(50,50)})},maxClusterRadius:40}),r=L.latLngBounds(L.latLng(t[0][1],t[0][2]),L.latLng(t[0][1],t[0][2])),s=0;s<t.length;s++){var o=t[s];getOpts(o[3]).color,getOpts(o[3]).klass;L.marker([o[1],o[2]],{value:o[3],title:o[0],url:o[5],icon:new L.DivIcon({className:"my-div-icon "+getOpts(o[3]).klass,html:'<span class="my-div-span">'+o[3]+"</span>",iconAnchor:[15,15]})}).addTo(n).on("click",function(a){document.querySelector(".loader").classList.add("is-show"),$(a.target.options.url)[0].click(),window.history.pushState({},"",$(a.target.options.url)[0].href)}),r.extend(L.latLng(o[1],o[2])),$(".hided").append(o[4])}return e&&a.fitBounds(r,{padding:[50,90]}),n}function showSensors(){mymap.addLayer(cluster)}function hideSensors(){mymap.removeLayer(cluster)}function hideHeatMap(){testData={max:300,min:0,data:[]},heatmapLayer.setData(testData),heatmapLayer.setData(testData)}function showHeatMap(){testData={max:300,min:0,data:getPointsMarkers()},heatmapLayer.setData(testData)}function getPointsMarkers(){result=[];for(var a=0;a<markers.length;a++){var t=markers[a];result.push({lat:t[1],lng:t[2],count:t[3]})}return result}function updateHeatMap(){1==parseInt(Cookies.get("show_heatmap"))?(testData={max:max_heatmap,min:0,data:getPointsMarkers()},heatmapLayer.setData(testData)):hideHeatMap()}